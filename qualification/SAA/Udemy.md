# SAA 試験突破

## わからん言葉
  * [X] Blue/Greenデプロイメント
    * 異なるバージョンのアプリケーションを実行する環境をそれぞれ１つずつ、計２つ作成し、それらを環境面でトラフィックを移動させることによって、アプリケーションの新バージョンをリリースするために利用される技術
  * [X] NATインスタンスと、NATゲートウェイの違い
    * NATインスタンス
      * EC2に作成、踏み台とかポート転送をしたければこっちを使う
    * NATゲートウェイ
      * AWSのマネージドサービス
      * プライベートサブネットにあるインスタンスからインターネット接続する際に利用される。
  * [X] プライマリーデータ（Primary Data）
    * 自社のデータ
    * すでに世の中に存在しているデータをセカンダリーデータという
  * [X] サブネット
    * /21で区切る場合
      * 10.0.0.0/21 → 10.0.0.0 ~ 10.0.7.255 まで使える
    * /24で区切る場合
      * 10.0.0.0/24, 10.0.1.24
  * [X] SFA
    * Sales Force Automation
    * 営業支援システム
  * [X] ステートフル（Stateful：処理状態を把握する）
    * 前回のデータを保存して、データ保存した内容を処理結果に反映される仕組みのこと
  * [X] ステートレス（Stateless：処理状態を把握しない。）
    * 前回のｈ

## SQS（2:36）[1:26,56]
  * 優先度付きキュー
    * 優先度の高いキュー/低いキューをそれぞれ用意し、クライアント側ではジョブの優先度でどちらのキューを登録するかを決め、ワーカー側では優先度の高いキューから優先的に実施する。
    * SNSにはそのような機能は無い。
  * キューの保持期間
    * デフォルトは４日、最大は１４日
  * 可視性タイムアウト
    * 処理中のメッセージを他のコンシューマから見えない状態にする
  * キューにより、システムの分散処理化が可能
  * キューにより、水平スケーリングが実現でき、スループットの向上が可能 

## SNS（1:19）[1:26,44]
  * マイクロサービス、分散型システム、サーバレスアプリケーションの分離を可能にする
  * 高可用性で、耐久性に優れたセキュアな完全マネージドpub/subメッセージングサービス
  * 高スループット、プッシュベース、多対多のメッセージングトピックを提供
  * メッセージングが主要な役割であり、特定のイベントをトリガーにワーカープロセスを起動する構成
  * プッシュ型のメッセージングサービス
  * 送信順序は保障されない


## EC2（1:48,63）（2:8）
  * リザーブドインスタンス
    * 1年間か3年間の期間を決めて前払いする
      * 1年1カ月利用していたということは、3年間前払いをしていることを意味する。
        * リザーブドインスタンスマーケットプレイスで、未使用の標準リザーブドインスタンスの販売をサポート。
    * リザーブドインスタンス -> オンデマンドインスタンス の切り替えはできない。
  * AMI
    * スナップショットは含まれているため、EBSスナップショットとAMIを両方取得する必要はない
    * リージョン間コピーは可能
    * ゴールデンイメージ -> 最新状態のAMI
  * プレイスメントグループ
    * 複数のインスタンスを論理的にグループ化して、パフォーマンスの向上・耐障害性を高める機能のこと
    * 単一のアベイラビリティゾーン内のインスタンスの論理的なグループ
  * パブリックIPアドレスの割り当てがオフになっている場合、そこで起動されたEC2インスタンスにはIPアドレスが付与されない。  

## VPC, EC2
  * VPC内に設置したEC2がインターネットからアクセスできない
    1. インターネットゲートウェイがサブネットに未設定
    1. ネットワークACLの設定でインターネットアクセスが未許可
    1. セキュリティグループの設定でインターネットアクセスが未許可
    1. パブリックIPアドレスが付与されていない
  * [X] ルートテーブル
    * 分割したネットワーク同士を通信させるための通信経路
    * この通信経路をルートと呼ぶ
    * ルート（送信先、ターゲット）をまとめたデータ構造のことをルートテーブル
    * マネジメントコンソールで管理
    * サブネット同士を通信させる
  * 仮想プライベートゲートウェイ
    * VPN接続においてのAmazon VPC側に配置するVPNコンセントレータ。
    * 複数のカスタマーゲートウェイからのVPN接続を受け付けることが可能。 
  * セキュリティグループを利用して特定のIPアドレスをブロックすることはできない
  * CIDR
    * /8は先頭の８が固定という意味
    * AWSのVPC内では/16~/28までが利用できる

## ECS
  * ECSタスク
    * 起動タイプを選ぶ、Fargate or EC2
    * ロールの付与は可能

## NATゲートウェイ（2:9
  * プライベートサブネットのインスタンスからはインターネットやほかのAWSサービスに接続できるが、インターネットから直接にインスタンスとの接続を開始できないようにすることができる。
    * [ ] ハンズオンで体験可能

## EBS（1:8）（2:11）[1.19]
  * EBSレプリケーションという機能は無い
  * スループット最適化HDDは、最大スループットが500MiB/秒

## DynamoDB（1:9（2:12）
  * JSON形式のファイルを保存
  * トラフィック量が多くても低レイテンシーを保つ
  * GSI（グローバルセカンダリインデックス）
    * プライマリーキーとは異なる属性を使って作成するインデックス
    * テーブルとは別のキャパシティユニットでスループットを指定
  * キャパシティーユニット
    * 読み込み/書き込み 容量
    * 事前に設定して上限を決定
    * 上限を増やせばその分費用はかさむ
  * スループット最適化HDD
    * 主な使い道は、ビッグデータ処理/DWH/大規模なETL処理やログ解析
    * ルートボリュームには利用不可


## S3（1:12,24,30,36,61）（2:13,14,15,18,25,40,41,49）[1:4,37,49,64]
  * プレフィックス利用の日付ベースでアップロードを分散することで、以下のようにパフォーマンス向上
    * 3,500リクエスト/秒
    * データの取得で5,500/秒
  * S3イベント
    * PUT,POST,COPY 他いろいろを
  * Standard IA（Infrequent Access）
    * 低頻度アクセスだが、読み込みはすぐにできる
  * Transfer Acceleration
    * クライアントとS3パケット間で、長距離にわたるファイル転送を高速、簡単、安全に行える
    * CloudFrontの世界中に分散したエッジロケーションを利用している
      * エッジロケーションに到着したデータは、最適化されたネットワークパスでAmazonS3にルーティングされる
  * マルチパートアップロード
    * 大容量オブジェクトをいくつかに分けてアップロードできるようになる、スループット向上などの利点あり。
  * セキュリティグループは設定できない
  * S3 API
    * AWS CLIから、Amazon S3 API への直通アクセスができるAPIレベルのコマンド
  * 事前署名付きURL
    * オブジェクトの所有者が独自のセキュリティ証明書を使用して、ダウンロード期限付きURLを発行する
  * CORS（Cross-Origin Resource Sharing）
    * S3にあるファイルを一時的に不特定多数に公開したい場合
    * IAMユーザアカウントをもっていない人に対して、一時的にDL/ULさせたい場合
    * オリジン
      * プロトコルとドメイン名をつなげたもの
      * セキュリティの脆弱性を防ぐためにSame-Origin Policyというポリシーが設けられ、リソースへの通信制限あり
    * 特定のドメインにロードされたクライアントウェブアプリが異なるドメイン内のリソースと通信する方法を定義
  * クロスリージョンレプリケーション 
    * レプリケート元/先の両方でバージョニングを有効にする必要がある
  * S3バケットにはイベント機能があり、CloudWatchによるS3イベント処理を確認する設定は必要無い
  * 各AWSリージョンにおいて、最小３つのAZで運用される
  * SSE-S3
    * Server Side Encryption
    * オブジェクトをデータセンターのディスクに保存する前にS3で暗号化し、オブジェクトをダウンロードするときに複合化
    * 暗号化と複合化はS3によって自動管理
  * キャッシュ型
    * プライマリーはS3ストレージ
    * オンプレミス環境のストレージをS3に拡張
    * 頻繁にアクセスされるデータはローカルのストレージゲートウェイに保持して、S3をプライマリデータストレージとする
    * 頻繁にアクセスするデータはオンプレミス環境にキャッシュ保持することで、低レイテンシーなアクセスが可能
  * 保管型
    * プライマリーはオンプレミス
    * プライマリデータをローカルに保存する一方で、そのデータを非同期にS3へバックアップする
    * オンプレミスのアプリケーションがそのデータセット全体に低レレイテンシーでアクセスが可能
  * 強い整合性（Strong Consistency：強い一貫性）モデルを利用しているため、反映誤差が生じることは無い
    * ※2020年12付きまでは結果整合性モデルを利用していた
  * Glacier Deep Archive
    * 3つ以上のAZにまたがって配置
    * 標準取り出し：12時間以内
    * 大量取り出し：48時間以内
  * オブジェクト削除不可設定は、初期設定時のみ可能

## FSx for Windows File Server
  * Windows File Server と互換性のあるストレージ

## FSx for Lustre
  * Lustre（ラスター、分散ファイルシステム）
  * 「富岳」に使われている

## RDS（1:10,32）[1:14,16]
  * RDS Proxy
    * アプリケーションとRDSデータベースの間の仲介役として機能
    * 必要となるデータベースへのコネクションプールを確立および管理し、アプリケーションからのデータベース接続を少なく抑える
  * Auto Scaling
    * ストレージに対してのみ利用可能
  * Sharding
    * データベース内の複数のテーブルにデータを分割するための一般的な概念
    * 水平分割
    * リクエストの増加などで単一のマスターDBの運用で限界がある場合に、一定のルールに従いデータを複数のDBにふりわけることでアクセスを分散
  * 暗号化
    * インスタンスとスナップショットが対象となる
    * DBインスタンス設定メニューにある暗号化オプションを有効化する
    * インスタンス作成時にのみ暗号化を設定可能
  * Aurora
    * リージョン間でリードレプリカを設定可能
      * ログ転送ではなく、ストレージレベルのレプリケーション機能を利用
        * 概ね1秒以下、最大でも５秒でレプリケーションを実行
    

## Route53
  * レコード
    * CNAME（Canonical Name）
      * Canonical（標準的な）
      * メイン名、ホスト名の別名を定義する
    * TXT（Text）
      * ホスト名に関連付けるテキスト情報を定義するレコード
    * MX（Mail Exchange）
      * 対象ドメイン宛のメール配送先ホスト名を定義するレコード
    * A（Address）
      * ホスト（FQDN）とサーバーを識別するグローバルIPアドレスの関連付けを定義するレコード
    * DNAME（Domain ？）
      * DNS名の部分木全体をマッピングする機能を提供するレコード
    * NS（Name Server）
      * ドメインのゾーン情報を管理するDNSサーバを定義するもの
    * Alias
      * ドメインと関連づけることができる
  * ルーティング
    * 加重ルーティング
      * 新しいバージョンのソフトウェアのテストに適している

## CloudFront（1:3,22,33）（2:25）
  * メタデータ、セッションデータ、一連のストリームデータを蓄積することでビッグデータ解析に利用できる
  * OAI（Origin Access Identity）
    * CloudFrontからS3にアクセスする際に使用する特別な証明書のようなもの
    * S3側でどのCloudFront経由かを識別し、特定のCloudFrontのみアクセスを許可するように設定する
    * 適切な言語表示にはクエリ文字列パラメータ値に基づいて言語を決定する
  * データ転送コスト
    * 供給されたデータ総量に基づくため、非圧縮ファイルより圧縮府ファイルを供給するほうがコストが安くなる
  * コンテンツが圧縮されるとDL時間が短縮される。
    * JSやCSSでは、DL時間が短縮されると、ウェブページが表示されるまでの時間が短縮される
  * CloudFrontで利用したキャッシュデータの蓄積はCloudFront側で処理される

## WAF
  * Web Application Firewall
  * Referr制限
    * WAFのWEB ACLによる制御

## Cloud Formation
  * 必須項目は「Resource」のみ

## VPC（2:36,48）[1:58]
  * カスタマーゲートウェイ
    * データセンターをAmazpn VPCにリンクする際の、作業者側アンカー
  * DNS Hostnames
    * パブリックIPv4アドレスとパブリックDNSホスト名を割り当てるかの設定
    * デフォルトは有効
  * VPCエンドポイント
    * インターネットを経由しないで、他のAWSサービスへ接続することができる

## STS（2:44）
  * SAML（Security Assertion Markup Language）
    * OASIS（XML関連の標準化団体）によって策定
    * 異なるインターネットドメイン間でユーザ認証を行うためのXMLをベースにした標準規格
  * STSはSAML2.0などのオープンスタンダードをサポートしている

## Auto Scaling（1:45）（2:45）[1:3]
  * 設定フロー
    * 起動テンプレート > Auto Scalingグループ
    * 起動テンプレートの設定にはAMIが必要、他にインスタンスタイプやAMI-ID、キーペア、Security Groupなど
  * スケーリングの種類
    * 簡易スケーリング 
      * 1つのメトリクスに対し、１種類のみスケーリング調整値を指定
    * スケジュールスケーリング
      * 指定した日付と時刻でスケーリング
    * ステップスケーリング
      * 1つのメトリクスに対し、複数のスケーリング調整値を指定
  * クールダウンタイマー
    * 新しいインスタンスが追加されるまでの待ち時間
      * ３分とすると、スケール後３分はスケールしない時間となる
  * インスタンスの起動失敗
    * 24時間失敗し続けるとAmazon側で停止される可能性がある
  

## Lambda
  * 一時ボリューム量の最大:512MB
  * 同時実行数:1000
  * 関数とレイヤーストレージ:75GB

## Kinesis（1:11
  * KCL（Kinesis Client Library）ワーカー
    * 各アプリケーションインスタンスに対応する処理ユニット
  * Kinessis Analytics
    * ストリーミングデータを標準SQLでリアルタイムなデータ処理を実施

## EFS（2:55）
  * マウントターゲット
    * ENI

## Transit Gateway（2:57
  * 中央のゲートウェイからネットワーク上にあるVPC,オンプレミスのデータセンター,リモートオフィスをそれぞれに単一の接続を構築して管理することができる
    * hub-and-spoke … 自転車のハブとタイヤに向かうスポークに見立てたことから

## CloudWatch（2:60
  * イベント
    * アプリケーションの可用性の問題発生時やリソースの変更時などのシステムイベントに自動的に対応できる
    * AWSリソースの変更を示すシステムイベントのほぼリアルタイムのストリームを提供

## CloudWatch Logs
  * EC2, CloudTrail, Route 53, その他のソースのログファイルの監視、保存、アクセスができる
  * アプリケーションログやApacheログを見るためのもの

## IAM（2:6）
  * IAMロール
    * リソース間のアクセス権限許可を実施する際の権限設定であり、EC2インスタンスからDBへのトラフィック通信を制御することができない

## DynamoDB（2:65）
  * DynamoDBストリーム
    * テーブル内の項目レベルの変更の時系列シーケンスをキャプチャし、この情報を最大24時間ログに保存する

## AWS KMS（1:18
  * エンベロープ暗号化

## Strage Gateway（1:28
  * オンプレとAWSクラウドストレージをシームレスに繋ぐ
  * 用途 -> バックアップ、アーカイブ、災害対策、クラウドデータ処理、ストレージの階層化、移行
  * NFS,SMB,iSCSIなどの標準ストレージプロトコルを使用
  * iSCSI（Small Computer System Interface）
    * データストレージサブシステムを結合するための、インターネットプロトコルベースのストレージネットワーキング標準
  * 保管型
    * プライマリデータ（自社データ）をローカルに保存する一方で、そのデータを非同期にAWSにバックアップ
    * データセットに低レイテンシーにアクセスできる
  * キャッシュ型
    * 頻繁にアクセスされるデータはローカルのストレージゲートウェイに保持しながら、S3をプライマリデータストレージとする

## Direct Connect（1:28）
  * AWSとオフィスやデータセンターを専用線で繋ぐ

## RedShift（1:41）[1:1]
  * シングルAZ配置のみをサポート。マルチAZ構成はできない。
  * 拡張VPCルーティング
    * VPC内のみにデータ移動を制御できる
  * 無料ストレージがあるが、容量の上限がくると課金が発生する。自動市ナップショットの保存期間を見直して不要な課金を防ぐ
  * スポットインスタンスの利用は停止の可能性があるため不適切

## Arganizations [1:21]
  * 複数のAWSアカウントの統合管理を可能にする機能

## OpsWorks
  * スタック
    * OpsWorksのトップエンティティ。スタック単位の構成情報をJSON形式で保持
  * レイヤー
    * スタックの中に複数のレイヤーが存在。LBレイヤー、Webレイヤー、DBレイヤーなどが考えられる

## AWS WAF
  * Web Application FireWall
  * CloudFrontに転送されるHTTPおよびHTTPリクエストのモニタリングや、コンテンツのアクセスコントロールを可能にする
  * 指定された条件（クエリ文字列の値、リクエスト送信元IPアドレス）に基づき、リクエストされたコンテンツまたはHTTPステータスコードでリクエストに対応する。