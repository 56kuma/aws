# SAA 試験突破

## わからん言葉
  * [X] Blue/Greenデプロイメント
    * 異なるバージョンのアプリケーションを実行する環境をそれぞれ１つずつ、計２つ作成し、それらを環境面でトラフィックを移動させることによって、アプリケーションの新バージョンをリリースするために利用される技術
  * [X] NATインスタンスと、NATゲートウェイの違い
    * NATインスタンス
      * EC2に作成、踏み台とかポート転送をしたければこっちを使う
    * NATゲートウェイ
      * AWSのマネージドサービス
      * プライベートサブネットにあるインスタンスからインターネット接続する際に利用される。
  * [X] プライマリーデータ（Primary Data）
    * 自社のデータ
    * すでに世の中に存在しているデータをセカンダリーデータという
  * [X] サブネット
    * /21で区切る場合
      * 10.0.0.0/21 → 10.0.0.0 ~ 10.0.7.255 まで使える
    * /24で区切る場合
      * 10.0.0.0/24, 10.0.1.24
  * [X] SFA
    * Sales Force Automation
    * 営業支援システム
  * [X] ステートフル（Stateful：処理状態を把握する）
    * 前回のデータを保存して、データ保存した内容を処理結果に反映される仕組みのこと
  * [X] ステートレス（Stateless：処理状態を把握しない。）
    * 前回の
  * [X] SCP（Service Control Policy）
    * 組織単位（Organization Unit）に対して、AWSサービスの権限設定を行う。
  * [X] RAID0
    * 複数のディスクを1台のディスクのように扱い読み書きを高速化する構成
  * [X] SAML（Security Assertion Markup Language）
    * インターネット上で、IDやパスワードなどの認証情報を連携するためのXMLベースの仕様
    * エンタープライズ間の認証で使われている
  * [X] Multicast
    * 複数の端末（ホスト）に対して同一データを一斉に送信する方法
  * [X] Overlay Multicast
    * Overlay（かぶせる、覆う）
    * クライアント・パソコンにインストールしたアプリケーション・ソフトでマルチキャストを実現する技術
  * [ ] DR（Disaster Recovery）構成
    * ホットスタンバイ … 稼働状態でスタンバイ
    * コールドスタンバイ … 稼働されていない状態でスタンバイ
    * ウォームスタンバイ … 切り替えまでに何らかの作業が必要
    * パイロットライト … 利用可能であるアプリケーションの最小バージョンを準備すること。
    * マルチサイト … マルチAZ,マルチリージョン展開などの複数サイトにインフラを展開する。

## ELB [2:56]
  * クロスゾーン負荷分散
    * 配下のEC2の不可に応じて、複数のAZに跨るEC2インスタンスに均等に負荷分散を行う
  * スティッキーセッション
    * sticky：粘着性
    * セッション中に同じユーザから来たリクエストを継続して同じEC2インスタンスに送信

## SQS（2:36）[1:26,56] [2:35]
  * 優先度付きキュー
    * 優先度の高いキュー/低いキューをそれぞれ用意し、クライアント側ではジョブの優先度でどちらのキューを登録するかを決め、ワーカー側では優先度の高いキューから優先的に実施する。
    * SNSにはそのような機能は無い。
  * キューの保持期間
    * デフォルトは４日、最大は１４日
  * 可視性タイムアウト
    * 処理中のメッセージを他のコンシューマから見えない状態にする
    * 超過するとAutoScallingされた他のインスタンス側で、キューが見えるようになり処理が実行される。
  * キューにより、システムの分散処理化が可能
  * キューにより、水平スケーリングが実現でき、スループットの向上が可能 

## SNS（1:19）[1:26,44] [2:4]
  * マイクロサービス、分散型システム、サーバレスアプリケーションの分離を可能にする
  * 高可用性で、耐久性に優れたセキュアな完全マネージドpub/subメッセージングサービス
  * 高スループット、プッシュベース、多対多のメッセージングトピックを提供
  * メッセージングが主要な役割であり、特定のイベントをトリガーにワーカープロセスを起動する構成
  * プッシュ型のメッセージングサービス
  * 送信順序は保障されない
  * 電話番号に対して直接メッセ＾時を発行することが可能

## SES [2:4]
  * アプリケーションの利用ユーザに対して一斉メールによるお知らせを実施

## EC2（1:48,63）（2:8） [2:5,40]
  * (覚え方 Zenn)[https://zenn.dev/matsu7089/articles/meaning-of-ec2-instance-types]
  * リザーブドインスタンス
    * 1年間か3年間の期間を決めて前払いする
      * 1年1カ月利用していたということは、3年間前払いをしていることを意味する。
        * リザーブドインスタンスマーケットプレイスで、未使用の標準リザーブドインスタンスの販売をサポート。
    * リザーブドインスタンス -> オンデマンドインスタンス の切り替えはできない。
  * スケジュールドリザーブドインスタンス
    * 2021年に廃止された
  * AMI
    * スナップショットは含まれているため、EBSスナップショットとAMIを両方取得する必要はない
    * リージョン間コピーは可能
    * ゴールデンイメージ -> 最新状態のAMI
  * プレイスメントグループ
    * 複数のインスタンスを論理的にグループ化して、パフォーマンスの向上・耐障害性を高める機能のこと
    * 単一のアベイラビリティゾーン内のインスタンスの論理的なグループ
  * パブリックIPアドレスの割り当てがオフになっている場合、そこで起動されたEC2インスタンスにはIPアドレスが付与されない。  
  * ROA（Route Origin Authorization）
    * RIR（Regional Internet Registry）地域インターネットレジストリを介して作成されるドキュメント

## VPC, EC2
  * VPC内に設置したEC2がインターネットからアクセスできない
    1. インターネットゲートウェイがサブネットに未設定
    1. ネットワークACLの設定でインターネットアクセスが未許可
    1. セキュリティグループの設定でインターネットアクセスが未許可
    1. パブリックIPアドレスが付与されていない

## VPC [2:34]
  * [X] ルートテーブル
    * 分割したネットワーク同士を通信させるための通信経路
    * この通信経路をルートと呼ぶ
    * ルート（送信先、ターゲット）をまとめたデータ構造のことをルートテーブル
    * マネジメントコンソールで管理
    * サブネット同士を通信させる
  * 仮想プライベートゲートウェイ
    * VPN接続においてのAmazon VPC側に配置するVPNコンセントレータ。
    * 複数のカスタマーゲートウェイからのVPN接続を受け付けることが可能。 
  * セキュリティグループを利用して特定のIPアドレスをブロックすることはできない
  * CIDR
    * /8は先頭の８が固定という意味
    * AWSのVPC内では/16~/28までが利用できる
  * EC2インスタンスがDNS名を受け取っていない
    * → DNS hostames オプションが有効化されていない。
  * VPCフローログ（Flow Log）
    * VPC内の解析に使われる


## ECS
  * ECSタスク
    * 起動タイプを選ぶ、Fargate or EC2
    * ロールの付与は可能

## NATゲートウェイ（2:9
  * プライベートサブネットのインスタンスからはインターネットやほかのAWSサービスに接続できるが、インターネットから直接にインスタンスとの接続を開始できないようにすることができる。
    * [ ] ハンズオンで体験可能

## EBS（1:8）（2:11）[1:19] [2:10,33]
  * EBSレプリケーションという機能は無い
  * スループット最適化HDDは、最大スループットが500MiB/秒
  * プロビジョンドIOPS SSDは、最大スループットが4000Mib/秒
  * DLM（Data Lifecycle Manager）
    * EBSのバックアップであるスナップショットの作成、保存、削除を自動化するスケジュールが設定できる
    * バックアップの有効化だけでは、定期的なライフサイクルポリシーを実現することはできない。

## DynamoDB（1:9（2:12）
  * JSON形式のファイルを保存
  * トラフィック量が多くても低レイテンシーを保つ
  * GSI（グローバルセカンダリインデックス）
    * プライマリーキーとは異なる属性を使って作成するインデックス
    * テーブルとは別のキャパシティユニットでスループットを指定
  * キャパシティーユニット
    * 読み込み/書き込み 容量
    * 事前に設定して上限を決定
    * 上限を増やせばその分費用はかさむ
  * スループット最適化HDD
    * 主な使い道は、ビッグデータ処理/DWH/大規模なETL処理やログ解析
    * ルートボリュームには利用不可


## S3（1:12,24,30,36,61）（2:13,14,15,18,25,40,41,49）[1:4,37,49,64] [2:14,21,36,50]
  * プレフィックス利用の日付ベースでアップロードを分散することで、以下のようにパフォーマンス向上
    * 3,500リクエスト/秒
    * データの取得で5,500/秒
  * S3イベント
    * PUT,POST,COPY 他いろいろを
  * Standard IA（Infrequent Access）
    * 低頻度アクセスだが、読み込みはすぐにできる
  * Transfer Acceleration
    * クライアントとS3パケット間で、長距離にわたるファイル転送を高速、簡単、安全に行える
    * CloudFrontの世界中に分散したエッジロケーションを利用している
      * エッジロケーションに到着したデータは、最適化されたネットワークパスでAmazonS3にルーティングされる
  * マルチパートアップロード
    * 大容量オブジェクトをいくつかに分けてアップロードできるようになる、スループット向上などの利点あり。
  * セキュリティグループは設定できない
  * S3 API
    * AWS CLIから、Amazon S3 API への直通アクセスができるAPIレベルのコマンド
  * 事前署名付きURL
    * オブジェクトの所有者が独自のセキュリティ証明書を使用して、ダウンロード期限付きURLを発行する
  * CORS（Cross-Origin Resource Sharing）
    * S3にあるファイルを一時的に不特定多数に公開したい場合
    * IAMユーザアカウントをもっていない人に対して、一時的にDL/ULさせたい場合
    * オリジン
      * プロトコルとドメイン名をつなげたもの
      * セキュリティの脆弱性を防ぐためにSame-Origin Policyというポリシーが設けられ、リソースへの通信制限あり
    * 特定のドメインにロードされたクライアントウェブアプリが異なるドメイン内のリソースと通信する方法を定義
  * クロスリージョンレプリケーション 
    * レプリケート元/先の両方でバージョニングを有効にする必要がある
  * S3バケットにはイベント機能があり、CloudWatchによるS3イベント処理を確認する設定は必要無い
  * 各AWSリージョンにおいて、最小３つのAZで運用される
  * SSE-S3
    * Server Side Encryption
    * オブジェクトをデータセンターのディスクに保存する前にS3で暗号化し、オブジェクトをダウンロードするときに複合化
    * 暗号化と複合化はS3によって自動管理
  * キャッシュ型
    * プライマリーはS3ストレージ
    * オンプレミス環境のストレージをS3に拡張
    * 頻繁にアクセスされるデータはローカルのストレージゲートウェイに保持して、S3をプライマリデータストレージとする
    * 頻繁にアクセスするデータはオンプレミス環境にキャッシュ保持することで、低レイテンシーなアクセスが可能
  * 保管型
    * プライマリーはオンプレミス
    * プライマリデータをローカルに保存する一方で、そのデータを非同期にS3へバックアップする
    * オンプレミスのアプリケーションがそのデータセット全体に低レレイテンシーでアクセスが可能
  * 強い整合性（Strong Consistency：強い一貫性）モデルを利用しているため、反映誤差が生じることは無い
    * ※2020年12付きまでは結果整合性モデルを利用していた
  * Glacier Deep Archive
    * 3つ以上のAZにまたがって配置
    * 標準取り出し：12時間以内
    * 大量取り出し：48時間以内
  * オブジェクト削除不可設定は、初期設定時のみ可能
  * CSE（Client Side Encryption）
    * S3へ送信する前にデータを暗号化
    * AWS KMSなどを利用して暗号化キーを作成・実施
    * アプリケーション内に保存したマスターキーを使用
  * クロスリージョンレプリケーション
    * トリガーは、オブジェクトの作成/更新/削除
    * AWS-CLIにて手動実行もできる。
  * Vault Lock ポリシー
    * vault（金庫室、貴重品保管、貯蔵所）
    * ロックによって「１年間の変更を禁止」のように設定できる
    * コンプライアンス対策に使われる
  * S3 Access Analyzer
    * AWSアカウントの外部からアクセスできるリソースを特定する総合的な解析結果を生成
      * 不正アクセスの調査用
  * S3 ストレージクラス分析
    * ストレージアクセスパターンを分析し、適切なデータを適切なストレージクラスに移行すべきタイミングを判断できる

## FSx for Windows File Server
  * Windows File Server と互換性のあるストレージ

## FSx for Lustre
  * Lustre（ラスター、分散ファイルシステム）
  * 「富岳」に使われている

## RDS（1:10,32）[1:14,16] [2:43]
  * RDS Proxy
    * アプリケーションとRDSデータベースの間の仲介役として機能
    * 必要となるデータベースへのコネクションプールを確立および管理し、アプリケーションからのデータベース接続を少なく抑える
  * Auto Scaling
    * ストレージに対してのみ利用可能
  * Sharding
    * データベース内の複数のテーブルにデータを分割するための一般的な概念
    * 水平分割
    * リクエストの増加などで単一のマスターDBの運用で限界がある場合に、一定のルールに従いデータを複数のDBにふりわけることでアクセスを分散
  * 暗号化
    * インスタンスとスナップショットが対象となる
    * DBインスタンス設定メニューにある暗号化オプションを有効化する
    * インスタンス作成時にのみ暗号化を設定可能
  * Aurora
    * リージョン間でリードレプリカを設定可能
      * ログ転送ではなく、ストレージレベルのレプリケーション機能を利用
        * 概ね1秒以下、最大でも５秒でレプリケーションを実行
  * 拡張モニタリング
    * DBインスタンス上の様々なプロセスまたはスレッドがCPUをどのように使用しているかを常時モニタリングするために必要
      * デフォルトでは30日間、CloudWatch Logs に保存される  

## Route53
  * レコード
    * CNAME（Canonical Name）
      * Canonical（標準的な）
      * メイン名、ホスト名の別名を定義する
    * TXT（Text）
      * ホスト名に関連付けるテキスト情報を定義するレコード
    * MX（Mail Exchange）
      * 対象ドメイン宛のメール配送先ホスト名を定義するレコード
    * A（Address）
      * ホスト（FQDN）とサーバーを識別するグローバルIPアドレスの関連付けを定義するレコード
    * DNAME（Domain ？）
      * DNS名の部分木全体をマッピングする機能を提供するレコード
    * NS（Name Server）
      * ドメインのゾーン情報を管理するDNSサーバを定義するもの
    * Alias
      * ドメインと関連づけることができる
  * ルーティング
    * 加重ルーティング
      * 新しいバージョンのソフトウェアのテストに適している
    * 位置情報ルーティング
      * ユーザのIPアドレスにより位置情報を特定して、地域ごとに異なるレコードを返す
    * 地理的近接性ルーティング
      * ユーザとリソースの場所に基づいて地理的近接性ルールを作成して、トラフィックをルーティングする方式
        * AWSリソースを使用している場合は、リソースを作成したAWSリージョンを場所とする
        * AWSリソース"以外"のリソースを使用している場合は、リソースの緯度と経度で位置を場所とする。

## CloudFront（1:3,22,33）（2:25） [2:46,52]
  * メタデータ、セッションデータ、一連のストリームデータを蓄積することでビッグデータ解析に利用できる
  * OAI（Origin Access Identity）
    * CloudFrontからS3にアクセスする際に使用する特別な証明書のようなもの
    * S3側でどのCloudFront経由かを識別し、特定のCloudFrontのみアクセスを許可するように設定する
    * 適切な言語表示にはクエリ文字列パラメータ値に基づいて言語を決定する
  * データ転送コスト
    * 供給されたデータ総量に基づくため、非圧縮ファイルより圧縮府ファイルを供給するほうがコストが安くなる
  * コンテンツが圧縮されるとDL時間が短縮
    * JSやCSSでは、DL時間が短縮されると、ウェブページが表示されるまでの時間が短縮される
  * CloudFrontで利用したキャッシュデータの蓄積はCloudFront側で処理される
  * 署名付きURL
    * 利用シーン
      1. "個別"のファイルへのアクセスを制限する場合に利用
      1. ユーザがCookieをサポートしていない
  * 署名付きCookie
    * 利用シーン
      1. "複数"の制限されたファイルへのアクセスを提供する場合
      1. 現在のURLを変更したくない場合
  * キャッシュの有効期限
    * TTL
      * 配信時に設定されるキャッシュ保持期間
    * Expireヘッダー
      * キャッシュの期限切れ日を設定
      * （例）Expires: Thu, 01 Dec 1994 16:00:00 GMT
    * Cache-Control max-age ヘッダー
      * CloudFrontがオリジンサーバからオブジェクトを再度取得するまでにオブジェクトをキャッシュに保持する期間（秒）を指定
      * 最小の有効期限切れ時間
        * ウェブディストリビューション：0秒
        * RTMPディストリビューション：3600秒
          * Real Time Message Protocol
      * 最大値は100（年）

## WAF
  * Web Application Firewall
  * Referr制限
    * WAFのWEB ACLによる制御

## Cloud Formation
  * 必須項目は「Resource」のみ

## VPC（2:36,48）[1:58]
  * カスタマーゲートウェイ
    * データセンターをAmazpn VPCにリンクする際の、作業者側アンカー
  * DNS Hostnames
    * パブリックIPv4アドレスとパブリックDNSホスト名を割り当てるかの設定
    * デフォルトは有効
  * VPCエンドポイント
    * インターネットを経由しないで、他のAWSサービスへ接続することができる

## STS（2:44）
  * SAML（Security Assertion Markup Language）
    * OASIS（XML関連の標準化団体）によって策定
    * 異なるインターネットドメイン間でユーザ認証を行うためのXMLをベースにした標準規格
  * STSはSAML2.0などのオープンスタンダードをサポートしている

## Auto Scaling（1:45）（2:45）[1:3]
  * 設定フロー
    * 起動テンプレート > Auto Scalingグループ
    * 起動テンプレートの設定にはAMIが必要、他にインスタンスタイプやAMI-ID、キーペア、Security Groupなど
  * スケーリングの種類
    * 簡易スケーリング 
      * 1つのメトリクスに対し、１種類のみスケーリング調整値を指定
    * スケジュールスケーリング
      * 指定した日付と時刻でスケーリング
    * ステップスケーリング
      * 1つのメトリクスに対し、複数のスケーリング調整値を指定
  * クールダウンタイマー
    * 新しいインスタンスが追加されるまでの待ち時間
      * ３分とすると、スケール後３分はスケールしない時間となる
  * インスタンスの起動失敗
    * 24時間失敗し続けるとAmazon側で停止される可能性がある
  * Lambdaや、API Gatewayへはスケーリングの有効化はできない。
  

## Lambda
  * 一時ボリューム量の最大:512MB
  * 同時実行数:デフォルトが100、最大1000
  * 関数とレイヤーストレージ:75GB
  * タイムアウト時間：デフォルト3秒、最大900秒
  * 関数実行時に使用できるメモリ：128MB ~ 3008MB
  * 

## Kinesis（1:11）[2:19]
  * KCL（Kinesis Client Library）ワーカー
    * 各アプリケーションインスタンスに対応する処理ユニット
  * Kinessis Analytics
    * ストリーミングデータを標準SQLでリアルタイムなデータ処理を実施
  * Kinesis Data Firehose
    * 所定の形式に変換しつつ、S3やRedShiftに蓄積することはできる。ただ、DynamoDBへの転送は不可。

## DataPipeline[2:37]
  * AWSデータベースや、ストレージ間のデータ移動と変換を自動化するサービス

## EFS（2:55）
  * マウントターゲット
    * ENI

## Amazon FSx for Windows [2:39]
  * ファイルシステムあたり最大2GB/秒のスループット、数百万のIOPS、一貫したミリ秒未満のレイテンシー
  * DFS名前空間*1を利用することで、数百ペタバイトのデータ全体で、最大で毎秒数十GBのスループットに数百万のIOPSまで、パフォーマンスをスケールアップできる
    * *1 ... Distributed File System

## Transit Gateway（2:57
  * 中央のゲートウェイからネットワーク上にあるVPC,オンプレミスのデータセンター,リモートオフィスをそれぞれに単一の接続を構築して管理することができる
    * hub-and-spoke … 自転車のハブとタイヤに向かうスポークに見立てたことから

## CloudWatch（2:60） [2:12]
  * イベント
    * アプリケーションの可用性の問題発生時やリソースの変更時などのシステムイベントに自動的に対応できる
    * AWSリソースの変更を示すシステムイベントのほぼリアルタイムのストリームを提供
  * EC2のデフォルトメトリクス以外の詳細なログ情報を取得するためには、CloudWatchの２つサービスを利用する必要がある
    * CloudWatchエージェント
      * 対象のEC2にインストールすることで、サーバー内部の詳細なログが取得できるようになる。
    * CloudWatch Logs
      * 取得したログを集約できるようになる

## CloudWatch Logs
  * EC2, CloudTrail, Route 53, その他のソースのログファイルの監視、保存、アクセスができる
  * アプリケーションログやApacheログを見るためのもの

## IAM（2:6）
  * IAMロール
    * リソース間のアクセス権限許可を実施する際の権限設定であり、EC2インスタンスからDBへのトラフィック通信を制御することができない

## DynamoDB（2:65）
  * DynamoDBストリーム
    * テーブル内の項目レベルの変更の時系列シーケンスをキャプチャし、この情報を最大24時間ログに保存する

## AWS KMS（1:18
  * エンベロープ暗号化

## Strage Gateway（1:28
  * オンプレとAWSクラウドストレージをシームレスに繋ぐ
  * 用途 -> バックアップ、アーカイブ、災害対策、クラウドデータ処理、ストレージの階層化、移行
  * NFS,SMB,iSCSIなどの標準ストレージプロトコルを使用
  * iSCSI（Small Computer System Interface）
    * データストレージサブシステムを結合するための、インターネットプロトコルベースのストレージネットワーキング標準
  * 保管型
    * プライマリデータ（自社データ）をローカルに保存する一方で、そのデータを非同期にAWSにバックアップ
    * データセットに低レイテンシーにアクセスできる
  * キャッシュ型
    * 頻繁にアクセスされるデータはローカルのストレージゲートウェイに保持しながら、S3をプライマリデータストレージとする

## Direct Connect（1:28）
  * AWSとオフィスやデータセンターを専用線で繋ぐ

## RedShift（1:41）[1:1] [2:44]
  * シングルAZ配置のみをサポート。マルチAZ構成はできない。
  * 拡張VPCルーティング
    * VPC内のみにデータ移動を制御できる
    * Reshiftクラスターと、データリポジトリ間のすべてのCOPY/UNLOADトラフィックがVPCを通るように強制
  * 無料ストレージがあるが、容量の上限がくると課金が発生する。自動市ナップショットの保存期間を見直して不要な課金を防ぐ
  * スポットインスタンスの利用は停止の可能性があるため不適切

## AWS Organizations [1:21] [2:42]
  * 複数のAWSアカウントの統合管理を可能にする機能
  * ADの機能は無い

## AWS Single Sign-On [2:42]
  * SAML認証が可能
  * SAML IdP機能をAWS Managed Microsoft AD または、AWS SSO ディレクトリに追加することで、ユーザはSAMLをサポートするサービスへのSSOが可能になる。

## OpsWorks
  * スタック
    * OpsWorksのトップエンティティ。スタック単位の構成情報をJSON形式で保持
  * レイヤー
    * スタックの中に複数のレイヤーが存在。LBレイヤー、Webレイヤー、DBレイヤーなどが考えられる

## AWS WAF
  * Web Application FireWall
  * CloudFrontに転送されるHTTPおよびHTTPリクエストのモニタリングや、コンテンツのアクセスコントロールを可能にする
  * 指定された条件（クエリ文字列の値、リクエスト送信元IPアドレス）に基づき、リクエストされたコンテンツまたはHTTPステータスコードでリクエストに対応する。

## Amazon Cognite
  * アプリケーションの認証機能を実装
  * MFAによる多要素認証と保存データおよび転送データの暗号化が実施できる。
  * エンタープライズIDプロバイダーを通してサインインすることができるようになる。

## Elastic Beanstalk [2:22]
  * Amazon ECS などのDockerにホストされたWEBアプリケーションの展開もサポートしている。

## API Gateway
  * スロットリング（Throttling）
    * 流量制御
    * 制御設定により、リクエストが多すぎるために、バックエンドサービスが処理しきれなくなることを防ぐ
  * API Gateway Cache
    * プロビジョニングして、GB指定することで、API呼び出しにキャッシュを追加できる